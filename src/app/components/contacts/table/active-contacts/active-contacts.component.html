<div class="table-container">
  <div class="button-container">
    <button mat-button><mat-icon>archive</mat-icon>Inactive</button>
    <button mat-button (click)="tableControl.deleteContacts('active')"><mat-icon>delete</mat-icon>Trash</button>
  </div>
  <div id="customers" class="table">
    <!-- Table Header -->
    <div class="table-head row">
      <div class="cell checkbox-cell">
        <section (click)="tableControl.checkAllContacts('active')" class="example-section">
          <mat-checkbox [checked]="tableControl.allCheckedActive" class="example-margin"></mat-checkbox>
        </section>
      </div>
      @for(item of this.contactsData.activeTableColumns; track $index; let i = $index) {
      @if (item.name == "Contacts") {
      <div class="cell Contacts">
        <span>{{item.name}}</span>
      </div>
      } @else {
      <div class="cell">
        <span>{{item.name}}</span>
      </div>
      }
      }
      <div class="cell button-container">
        <button [matMenuTriggerFor]="menu" mat-raised-button matTooltip="Add a new Column"
          aria-label="Button that displays a tooltip when focused or hovered over">
          <mat-icon>add</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button (click)="tableControl.addColumn('note', 'active')" mat-menu-item><mat-icon
              class="note">history_edu</mat-icon> Note</button>
          <button (click)="tableControl.addColumn('type', 'active')" mat-menu-item><mat-icon
              class="type">supervised_user_circle</mat-icon>
            Type</button>
          <button (click)="tableControl.addColumn('status', 'active')" mat-menu-item><mat-icon
              class="status">bolt</mat-icon> Status</button>
          <button (click)="tableControl.addColumn('prio', 'active')" mat-menu-item><mat-icon
              class="prio">priority_high</mat-icon>
            Priority</button>
        </mat-menu>
      </div>
    </div>

    <!-- Table Content Rows -->
    @if (contactsData.activeContacts.length > 0) {
    @for (item of this.contactsData.activeContacts; track $index; let i = $index) {
    <div class="row content-row">
      <div class="cell checkbox-cell">
        <section class="example-section">
          <mat-checkbox [(ngModel)]="item.checked" class="example-margin"></mat-checkbox>
        </section>
      </div>
      <div class="cell Contacts"><input type="text" (input)="item.name=getValue($event)" [value]="item.name"></div>
      <div (mouseover)="hoverAction('tel')" (mouseout)="mouseOutAction();" class="cell email-cell"><a
          [href]="'tel:' + item.email">{{item.tel}}</a><mat-icon [ngClass]="{'d-none': !phoneHovered}">close</mat-icon>
      </div>
      <div (mouseover)="hoverAction('email')" (mouseout)="mouseOutAction();" class="cell email-cell"><a
          [href]="'mailto:' + item.email">{{item.email}}</a><mat-icon
          [ngClass]="{'d-none': !emailHovered}">close</mat-icon>
      </div>
      @for (item of item.newColumns; track $index) {
      <div class="cell"></div>
      }
    </div>
    }
    }

    <!-- Add New Contact Row -->
    <div class="row content-row add-contact-row" (keydown)="tableControl.keyboardAddContact($event, 'active')">
      <div class="cell empty-field checkbox-cell"></div>
      <div class="cell add Contacts">
        <mat-icon (click)="tableControl.mouseAddContact('active')">add_circle</mat-icon>
        <input [(ngModel)]="tableControl.newContact" type="text" placeholder="Add contact">
      </div>
      <div class="cell typ-cell"></div>
      <div class="cell"></div>
      @if (contactsData.activeContacts[0]) {
      @for (item of contactsData.activeContacts[0].newColumns; track $index) {
      <div class="cell"></div>
      }
      } @else {
      <div class="cell"></div>
      }

    </div>
  </div>
</div>